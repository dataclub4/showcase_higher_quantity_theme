!function(t){"use strict";const e=setInterval((()=>{window.ST_GLOBALS&&(clearInterval(e),n().then((()=>console.info("ST Feature Icon loaded"))))}));class i{constructor(e){this.editor=e,this.divEl=t.createElement("div")}render(){const{id:t,position:e,html:i,css:o,editor:n}=this.editor;return this.divEl.classList.add("st-feature-wrapper"),this.divEl.classList.add(`st-feature-${t}`),this.divEl.innerHTML=i,Object.keys(n?.mapping).map((t=>{this.divEl.querySelector(t).innerText=window.ST_GLOBALS.translate(n?.mapping[t])})),{id:t,position:e,html:i,css:o,editor:n,titleFontFamily:{fontFamily:this.editor?.editor?.titleFontFamily?.fontFamily,fontWeight:this.editor?.editor?.titleFontFamily?.fontWeight},subFontFamily:{fontFamily:this.editor?.editor?.subFontFamily?.fontFamily,fontWeight:this.editor?.editor?.subFontFamily?.fontWeight},filters:window.ST_GLOBALS.convertFilters(this.editor?.position?.productFilters,this.editor?.position?.products),divEl:this.divEl}}}const o={},n=async function(){if(!window.ST_PLAN||"ACTIVE"!==window.ST_PLAN?.status||"Advanced"!==window.ST_PLAN?.name)return;const t=window.ST_FEATURE_ICONS||[];if(0===t.length)return;const e=[];let n="";t.map((t=>{const{status:l=!1}=t;if(l){const l=new i(t).render();o[l.id]=l;const s=l.titleFontFamily,r=l.subFontFamily;if("object"==typeof s&&s?.fontFamily){0===e.filter((t=>t.fontFamily===s.fontFamily&&parseInt(t.fontWeight)===parseInt(s.fontWeight))).length&&e.push(s)}if("object"==typeof r&&r?.fontFamily){0===e.filter((t=>t.fontFamily===r.fontFamily&&parseInt(t.fontWeight)===parseInt(r.fontWeight))).length&&e.push(r)}const c=l.css;n+=c}})),e.length&&e.map((t=>{window.ST_LOADED_FONTS.includes(t.fontFamily)||window.ST_GLOBALS.loadFont(t)})),window.ST_GLOBALS.addStyle(n),l()},l=async function(){let e=window.ST_GLOBALS.pageType;for(const n in o){const l=o[n],{position:r,id:c,filters:a,divEl:d}=l;if("block"===r.page){let e=t.querySelectorAll(".shine-feature-icon:not(.shine-show)");for(let t=0;t<e.length;t++){if((e[t].getAttribute("data-id")||"")===c){let i=d.cloneNode(!0);e[t].appendChild(i),e[t].classList.add("shine-show");const o=e[t].querySelector(".st-editor-preview");o&&(o.style.display="none")}}}else if("custom"===r.page&&""!==r.selector.cssSelector){let e=r.selector.cssSelector.split(",");const o=r?.selector?.cssPosition?r?.selector?.cssPosition:"below";for(var i=0;i<e.length;i++){let n=t.querySelector(e[i]);if(!n){let o=0;for(;o<=5;)n=t.querySelector(e[i]),n?o=6:(await new Promise((t=>setTimeout(t,300))),o++)}if(n){let t=d.cloneNode(!0);"above"===o?n.parentNode.insertBefore(t,n):n.parentNode.insertBefore(t,n.nextSibling)}}}else if(e===r.page){let e=t.getElementsByTagName("html")[0].getAttribute("lang"),i="";if("product"===r.page){i=`form[action*="/cart/add"]:not(.installment), form[action="/${e}/cart/add"]:not(.installment)`,""!==r.selector.cssSelector&&(i=r.selector.cssSelector);try{const t=window.ST_GLOBALS.product;let{inventory:e,collections:o,tags:n,title:l,id:c,available:f,price:p,price_min:y,price_max:h,compare_at_price:u,vendor:g,type:m}=t;if(p=window.ST_GLOBALS.fixPrice(p),y=window.ST_GLOBALS.fixPrice(y),h=window.ST_GLOBALS.fixPrice(h),u=window.ST_GLOBALS.fixPrice(u),a.products.size)a.products.has(c)&&s(r.page,i,d);else if(0===Object.keys(a.filters).length&&null===a.collection)s(r.page,i,d);else if(a.select_all&&a.collection&&o.includes(a.collection))s(r.page,i,d);else if(Object.keys(a.filters).length){let t=0,o=Object.keys(a.filters).length;for(const i in a.filters)"_s"===i&&l.includes(a.filters[i])&&(t+=1),"price"===i&&!isNaN(y)&&!isNaN(h)&&y>=a.filters[i].min&&h<=a.filters[i].max&&(t+=1),"tag"===i&&n.includes(`${a.filters.tag}`)&&(t+=1),"vendor"===i&&g===a.filters.vendor&&(t+=1),"type"===i&&m===a.filters.type&&(t+=1),"inventory"===i&&("instock"===a.filters.inventory.type&&f&&(t+=1),"outstock"!==a.filters.inventory.type||f||(t+=1),"less-than"===a.filters.inventory.type&&f&&!isNaN(e)&&e<=a.filters.inventory.lte&&(t+=1),"great-than"===a.filters.inventory.type&&f&&!isNaN(e)&&e>=a.filters.inventory.gte&&(t+=1));t===o&&s(r.page,i,d)}}catch(t){console.log(t)}}else"cart"===r.page&&(i='button[name="checkout"]',""!==r.selector.cssSelector&&(i=r.selector.cssSelector),s(r.page,i,d))}}},s=function(e,i,o){if(""!==i){let l=t.querySelectorAll(i);if("cart"===e&&(l.length||(l=t.querySelectorAll(`form[action="/cart"], form[action="/${lang}/cart"]`)),l.length||(l=t.querySelectorAll(`form[action="/checkout"], form[action="/${lang}/checkout"]`))),l.length)for(var n=0;n<l.length;n++){"cart"===e&&(l[n].parentNode.style.flexWrap="wrap");let t=o.cloneNode(!0);l[n].parentNode.insertBefore(t,l[n].nextSibling)}}}}(window.document);